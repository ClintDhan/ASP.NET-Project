@{
    Layout = "~/Views/Shared/UserLayout.cshtml";
}

@section Title {
User Projects
}

<div class="header-color"></div>

<!-- Button trigger modal -->
<div class="card-container">




    <div class="project-container" style="margin-top: 10.3vh;">
    <div class="scroll-container">
        <table id="example" class="table table-striped" style="width:100%">
            <thead>
                <tr>
                    <th>#</th>
                    <th style="width: 10vw;">Project Name</th>
                    <th>Start Date</th>
                    <th>Due Date</th>
                    <th>Status</th>
                    <th>Condition</th> <!-- New column for Active/Inactive status -->
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                @{ int index = 1; }
                @foreach (var project in Model)
                {
                    <tr>
                        <td>@index</td>
                        <td>@project.ProjectName</td>
                        <td>@project.StartDate.ToString("yyyy-MM-dd")</td>
                        <td>@project.DueDate.ToString("yyyy-MM-dd")</td>
                        <td>@project.Status.ToString()</td>
                        <td>@(project.IsActive ? "Active" : "Inactive")</td> <!-- Check IsActive field -->
                        <td>
                            @if (project.IsActive)
                {
                    <!-- Allow navigation if project is active -->
                    <button class="btn btn-primary">
                        <a class="dropdown-item" href="@Url.Action("ViewProject", "Home", new { projectId = project.ProjectId })">
                            View
                        </a>
                    </button>
                }
                else
                {
                    <!-- Trigger SweetAlert2 if project is inactive -->
                    <button class="btn btn-danger" onclick="showInactiveAlert()">
                        View
                    </button>
                }
                        </td>
                    </tr>
                    index++; // Increment the index for the next row
                }
            </tbody>
        </table>
    </div>
</div>

</div>

<!-- Modal -->
<div class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-lg custom-modal-size">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Project</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">

                <div class="flx-row">
                    <div class="">
                        <label for="">Project Name:</label><br>
                        <input type="text">
                    </div>
                    <div class="" style="margin-left: 1rem;">
                        <label for="">Project Manager:</label><br>
                        <input type="text">
                    </div>
                </div>

                <div class="flx-row">
                    <div class="">
                        <label for="">Start Date:</label><br>
                        <input type="date">
                    </div>
                    <div class="" style="margin-left: 1rem;">
                        <label for="">Due Date:</label><br>
                        <input type="date">
                    </div>
                </div>

                <div class="flx-row">
                    <div>
                        <label for="">Members:</label> <br>
                        <select name="cars" id="cars" multiple>
                            <option value="volvo">Clint</option>
                            <option value="saab">Mekko</option>
                            <option value="opel">Jonathan</option>
                            <option value="audi">MeowMeow</option>
                        </select>
                    </div>
                </div>

                <div class="flx-row">
                    <div>
                        <label for="exampleFormControlTextarea1">Description:</label><br>
                        <textarea class="form-control text-area-desc" id="exampleFormControlTextarea1"
                            rows="3"></textarea>
                    </div>
                </div>


            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Save changes</button>
            </div>
        </div>
    </div>
</div>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.14.1/dist/sweetalert2.all.min.js"></script>

@section Scripts {
    <script>

        document.getElementById("UserProject").classList.add("active");
         function showInactiveAlert() {
            Swal.fire({
                icon: 'error',
                title: 'Project Inactive',
                text: 'You cannot view this project because it is inactive.',
                confirmButtonText: 'Okay'
            });
        }
    </script>
}